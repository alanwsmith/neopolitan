{%- from "macros/text.j2" import text -%}
{%- from "macros/section_attrs.j2" import section_attrs -%}

{%- macro sections(content) -%}
  {%- for section in content -%}
    {%- if section.type == "aside" -%}
      <aside {{- section_attrs(section.attrs)-}}>
        {%- for paragraph in section.paragraphs -%}
          <p>{{- text(paragraph.tags) -}}</p>
        {%- endfor -%}
      </aside>
    {%- elif section.type == "blockquote" -%}
      <blockquote {{- section_attrs(section.attrs)-}}>
        {%- for paragraph in section.paragraphs -%}
          <p>{{- text(paragraph.tags) -}}</p>
        {%- endfor -%}
      </blockquote>
    {%- elif section.type == "closediv" -%}
      </div>
    {%- elif section.type == "code" -%}
      <pre><code {{- section_attrs(section.attrs)-}}>
        {{- section.text -}}
      </code></pre>
    {%- elif section.type == "hidden" -%}
    {%- elif section.type == "h1" -%}
      <h1 {{- section_attrs(section.attrs)-}}>
        {{text(section.headline.tags)}}
      </h1>
      {%- for paragraph in section.paragraphs -%}
        <p>{{- text(paragraph.tags) -}}</p>
      {%- endfor -%}
    {%- elif section.type == "h2" -%}
      <h2 {{- section_attrs(section.attrs)}}>
        {{text(section.headline.tags)}}
      </h2>
      {%- for paragraph in section.paragraphs -%}
        <p>{{- text(paragraph.tags) -}}</p>
      {%- endfor -%}
    {%- elif section.type == "h3" -%}
      <h2 {{- section_attrs(section.attrs)}}>
        {{text(section.headline.tags)}}
      </h2>
      {%- for paragraph in section.paragraphs -%}
        <p>{{- text(paragraph.tags) -}}</p>
      {%- endfor -%}
    {%- elif section.type == "h4" -%}
      <h2 {{- section_attrs(section.attrs)}}>
        {{text(section.headline.tags)}}
      </h2>
      {%- for paragraph in section.paragraphs -%}
        <p>{{- text(paragraph.tags) -}}</p>
      {%- endfor -%}
    {%- elif section.type == "h5" -%}
      <h2 {{- section_attrs(section.attrs)}}>
        {{text(section.headline.tags)}}
      </h2>
      {%- for paragraph in section.paragraphs -%}
        <p>{{- text(paragraph.tags) -}}</p>
      {%- endfor -%}
    {%- elif section.type == "h6" -%}
      <h2 {{- section_attrs(section.attrs)}}>
        {{text(section.headline.tags)}}
      </h2>
      {%- for paragraph in section.paragraphs -%}
        <p>{{- text(paragraph.tags) -}}</p>
      {%- endfor -%}
    {%- elif section.type == "html" -%}
        {{- section.text -}}
    {%- elif section.type == "hr" -%}
      <hr {{- section_attrs(section.attrs)-}} />
    {%- elif section.type == "image" -%}
      <div {{- section_attrs(section.attrs)-}}>
       <img src="{{- section.src -}}">
      </div>
    {%- elif section.type == "opendiv" -%}
      <div {{- section_attrs(section.attrs) -}}>
    {%- elif section.type == "p" -%}
      {%- for paragraph in section.paragraphs -%}
        <p {{- section_attrs(section.attrs) -}}>{{- text(paragraph.tags) -}}</p>
      {%- endfor -%}
    {%- elif section.type == "pre" -%}
      <pre {{- section_attrs(section.attrs)-}}>
        {{- section.text -}}
      </pre>
    {%- elif section.type == "vimeo" -%}
      <div {{- section_attrs(section.attrs)-}}>
       <iframe src="https://player.vimeo.com/video/{{- section.id -}}" width="640" height="360" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
      </div>
    {%- elif section.type == "youtube" -%}
      <div {{- section_attrs(section.attrs)-}}>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/{{- section.id -}}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
      </div>
    {%- endif -%}
  {%- endfor -%}
{%- endmacro -%}